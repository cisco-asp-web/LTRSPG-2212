# Containerlab topology file for Cisco Live EU 2026 Lab 1

name: cleu26

mgmt:
  network: mgt-network
  ipv4-subnet: 172.20.6.0/24
  
topology:
  nodes:

# XRd Core Network
    xrd-london:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/london.cfg
      mgmt-ipv4: 172.20.6.101
      
    xrd-amsterdam:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/amsterdam.cfg
      mgmt-ipv4: 172.20.6.102

    xrd-berlin:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/berlin.cfg
      mgmt-ipv4: 172.20.6.103

    xrd-zurich:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/zurich.cfg
      mgmt-ipv4: 172.20.6.104

    xrd-paris:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/paris.cfg
      mgmt-ipv4: 172.20.6.105

    xrd-barcelona:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/barcelona.cfg
      mgmt-ipv4: 172.20.6.106

    xrd-rome:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/rome.cfg
      mgmt-ipv4: 172.20.6.107

    app-container-rome:
      kind: linux
      image: cl-rome-container:latest
      mgmt-ipv4: 172.20.6.109
      cap-add:
        - NET_ADMIN
        - NET_RAW
      ports:
        - 2222:22

    app-container-london:
      kind: linux
      image: cl-london-container:latest
      mgmt-ipv4: 172.20.6.108
      cap-add:
        - NET_ADMIN
        - NET_RAW
      ports:
        - 22222:22

# London DC SONiC Network
    sonic-leaf-00:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.128
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    sonic-leaf-01:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.129
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    sonic-leaf-02:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.130
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    sonic-spine-00:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.192
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    sonic-spine-01:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.193
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    sonic-spine-02:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.194
      env:
        USERNAME: cisco
        PASSWORD: cisco123

    london-vm-00-fe:
      kind: bridge
    london-vm-01-fe:
      kind: bridge
    london-vm-02-fe:
      kind: bridge

    london-vm-00-be:
      kind: bridge
    london-vm-01-be:
      kind: bridge
    london-vm-02-be:
      kind: bridge


  links:

    # Core Network Links
    - endpoints: ["xrd-london:Gi0-0-0-0", "app-container-london:eth1"]                      # Link O
    - endpoints: ["xrd-london:Gi0-0-0-1", "xrd-amsterdam:Gi0-0-0-0"]                        # Link A
    - endpoints: ["xrd-london:Gi0-0-0-2", "xrd-paris:Gi0-0-0-0"]                            # Link B
    - endpoints: ["xrd-amsterdam:Gi0-0-0-1", "xrd-berlin:Gi0-0-0-0"]                        # Link E
    - endpoints: ["xrd-amsterdam:Gi0-0-0-2", "xrd-barcelona:Gi0-0-0-1"]                     # Link C
    - endpoints: ["xrd-berlin:Gi0-0-0-1", "xrd-zurich:Gi0-0-0-0"]                           # Link F                
    - endpoints: ["xrd-zurich:Gi0-0-0-1", "xrd-rome:Gi0-0-0-1"]                             # Link H
    - endpoints: ["xrd-paris:Gi0-0-0-1", "xrd-zurich:Gi0-0-0-2"]                            # Link D
    - endpoints: ["xrd-paris:Gi0-0-0-2", "xrd-barcelona:Gi0-0-0-2"]                         # Link G
    - endpoints: ["xrd-barcelona:Gi0-0-0-0", "xrd-rome:Gi0-0-0-2"]                          # Link I
    - endpoints: ["xrd-rome:Gi0-0-0-0", "app-container-rome:eth1"]                          # Link J
    - endpoints: ["xrd-rome:Gi0-0-0-3", "app-container-rome:eth2"]                          # Link K

    # London DC SONiC Network Links
    - endpoints: ["sonic-leaf-00:eth1", "sonic-spine-00:eth1"]
    - endpoints: ["sonic-leaf-00:eth2", "sonic-spine-01:eth1"]
    - endpoints: ["sonic-leaf-00:eth3", "sonic-spine-02:eth1"]
    - endpoints: ["sonic-leaf-01:eth1", "sonic-spine-00:eth2"]
    - endpoints: ["sonic-leaf-01:eth2", "sonic-spine-01:eth2"]
    - endpoints: ["sonic-leaf-01:eth3", "sonic-spine-02:eth2"]
    - endpoints: ["sonic-leaf-02:eth1", "sonic-spine-00:eth3"]
    - endpoints: ["sonic-leaf-02:eth2", "sonic-spine-01:eth3"]
    - endpoints: ["sonic-leaf-02:eth3", "sonic-spine-02:eth3"]


    # London DC SONiC Network Links to London VMs
    - endpoints: ["sonic-leaf-00:eth5", "london-vm-00-be:sonic-leaf00-eth5"]
    - endpoints: ["sonic-leaf-01:eth5", "london-vm-01-be:sonic-leaf01-eth5"]
    - endpoints: ["sonic-leaf-02:eth5", "london-vm-02-be:sonic-leaf02-eth5"]


    # London DC SONiC  Front End Network Links between London VMs (bridges) and XRd
    - endpoints: ["xrd-london:Gi0-0-0-3", "london-vm-00-fe:xrd-london:Gi0-0-0-3"]
    - endpoints: ["xrd-london:Gi0-0-0-4", "london-vm-01-fe:xrd-london:Gi0-0-0-4"]
    - endpoints: ["xrd-london:Gi0-0-0-5", "london-vm-02-fe:xrd-london:Gi0-0-0-5"]


