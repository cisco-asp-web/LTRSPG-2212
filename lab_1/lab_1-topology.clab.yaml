# Containerlab topology file for Cisco Live EU 2026 Lab 1

name: cleu26

mgmt:
  network: mgt-network
  ipv4-subnet: 172.20.6.0/24
  
topology:
  nodes:

# XRd Core Network
    london:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/london.cfg
      mgmt-ipv4: 172.20.6.101
      
    amsterdam:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/amsterdam.cfg
      mgmt-ipv4: 172.20.6.102

    berlin:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/berlin.cfg
      mgmt-ipv4: 172.20.6.103

    zurich:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/zurich.cfg
      mgmt-ipv4: 172.20.6.104

    paris:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/paris.cfg
      mgmt-ipv4: 172.20.6.105

    barcelona:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/barcelona.cfg
      mgmt-ipv4: 172.20.6.106

    rome:
      kind: cisco_xrd
      image: cisco-xrd-control-plane:24.4.1
      startup-config: xrd-config/rome.cfg
      mgmt-ipv4: 172.20.6.107

    rome00:
      kind: linux
      image: cl-rome:latest
      mgmt-ipv4: 172.20.6.109
      exec:
        - sh /usr/local/bin/network-config.sh

    rome01:
      kind: linux
      image: cl-rome:latest
      mgmt-ipv4: 172.20.6.110
      exec:
        - sh /usr/local/bin/network-config.sh

# London DC SONiC Network
    leaf00:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.128

    leaf01:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.129

    leaf02:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.130

    leaf03:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.131

    spine00:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.192

    spine01:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.193

    spine02:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.194

    spine03:
      kind: linux
      image: vrnetlab/sonic_sonic-vs:vpp20250422
      mgmt-ipv4: 172.20.6.195

    berlin1-fe:
      kind: bridge
    berlin2-fe:
      kind: bridge
    berlin3-fe:
      kind: bridge
    berlin4-fe:
      kind: bridge

    berlin1-be:
      kind: bridge
    berlin2-be:
      kind: bridge
    berlin3-be:
      kind: bridge
    berlin4-be:
      kind: bridge

  links:

    # Core Network Links
    #- endpoints: ["london:Gi0-0-0-0", "amsterdam:eth1"]
    - endpoints: ["london:Gi0-0-0-1", "amsterdam:Gi0-0-0-0"]      
    - endpoints: ["london:Gi0-0-0-2", "paris:Gi0-0-0-0"]
    #- endpoints: ["london:Gi0-0-0-3", "amsterdam:eth2"]
    - endpoints: ["amsterdam:Gi0-0-0-1", "berlin:Gi0-0-0-0"]
    - endpoints: ["amsterdam:Gi0-0-0-2", "barcelona:Gi0-0-0-1"]
    - endpoints: ["amsterdam:Gi0-0-0-3", "berlin1-fe:amsterdam-Gi0-0-0-3"]
    - endpoints: ["amsterdam:Gi0-0-0-4", "berlin2-fe:amsterdam-Gi0-0-0-4"]
    - endpoints: ["berlin:Gi0-0-0-1", "zurich:Gi0-0-0-0"]
    - endpoints: ["berlin:Gi0-0-0-2", "berlin3-fe:berlin-Gi0-0-0-2"]
    - endpoints: ["berlin:Gi0-0-0-3", "berlin4-fe:berlin-Gi0-0-0-3"]
    - endpoints: ["zurich:Gi0-0-0-1", "rome:Gi0-0-0-1"]
    - endpoints: ["paris:Gi0-0-0-1", "zurich:Gi0-0-0-2"]
    - endpoints: ["paris:Gi0-0-0-2", "barcelona:Gi0-0-0-2"]
    - endpoints: ["barcelona:Gi0-0-0-0", "rome:Gi0-0-0-2"]
    - endpoints: ["rome:Gi0-0-0-0", "rome00:eth1"]
    - endpoints: ["rome:Gi0-0-0-3", "rome01:eth1"]

    # London DC SONiC Network Links
    - endpoints: ["leaf00:eth1", "spine00:eth1"]
    - endpoints: ["leaf00:eth2", "spine01:eth1"]
    - endpoints: ["leaf00:eth3", "spine02:eth1"]
    - endpoints: ["leaf00:eth4", "spine03:eth1"]

    - endpoints: ["leaf01:eth1", "spine00:eth2"]
    - endpoints: ["leaf01:eth2", "spine01:eth2"]
    - endpoints: ["leaf01:eth3", "spine02:eth2"]
    - endpoints: ["leaf01:eth4", "spine03:eth2"]

    - endpoints: ["leaf02:eth1", "spine00:eth3"]
    - endpoints: ["leaf02:eth2", "spine01:eth3"]
    - endpoints: ["leaf02:eth3", "spine02:eth3"]
    - endpoints: ["leaf02:eth4", "spine03:eth3"]

    - endpoints: ["leaf03:eth1", "spine00:eth4"]
    - endpoints: ["leaf03:eth2", "spine01:eth4"]
    - endpoints: ["leaf03:eth3", "spine02:eth4"]
    - endpoints: ["leaf03:eth4", "spine03:eth4"]

    # London DC SONiC Network Links to Berlin VMs
    - endpoints: ["leaf00:eth5", "berlin1-be:leaf00-eth5"]
    - endpoints: ["leaf01:eth5", "berlin2-be:leaf01-eth5"]
    - endpoints: ["leaf02:eth5", "berlin3-be:leaf02-eth5"]
    - endpoints: ["leaf03:eth5", "berlin4-be:leaf03-eth5"]


